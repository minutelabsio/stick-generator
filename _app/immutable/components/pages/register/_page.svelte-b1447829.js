import{S as me,i as be,s as _e,e as pe,b as Q,g as Oe,t as ee,d as Ye,f as te,h as c,$ as ze,k as u,q as g,a as _,l as d,m as h,r as y,c as v,n as a,a1 as Se,D as r,H as ke,C as ie,a4 as je,x as ve,y as ge,z as ye,A as xe,E as Ve,F as We,u as qe,G as Me}from"../../../chunks/index-5bd3dcd0.js";import{s as $e}from"../../../chunks/index-29800c50.js";import{b as Ee}from"../../../chunks/preload-helper-ba922b4b.js";import{c as Ge,U as Ke,p as Ze,r as Je}from"../../../chunks/account-a239d173.js";import{F as Qe}from"../../../chunks/FilesystemActivity-903598e6.js";import{a as Be}from"../../../chunks/app-info-b761063d.js";function Xe(f){let e,t,l,n,o,i,w,s,p,b,B,I,L,S,m,C,V,x,A,R,N,P,q,G,D,z,re,le,H,ae,X,j,O,F,$,Y,se,K,M,ne,Z,ue,k=f[1]&&Fe(),T=!f[2]&&Re(),E=f[4]&&He();return{c(){e=u("div"),t=u("h1"),l=g("Connect this device"),n=_(),o=u("form"),i=u("h2"),w=g("Choose a username"),s=_(),p=u("div"),b=u("input"),I=_(),k&&k.c(),L=_(),T&&T.c(),S=_(),m=u("div"),C=u("input"),V=_(),x=u("label"),A=g("This is a public or shared computer"),R=_(),N=u("label"),P=u("span"),q=g(`In order to ensure the security of your private data, Webnative does
            not recommend creating an account from a public or shared computer.`),G=_(),D=u("div"),z=u("a"),re=g("Cancel"),le=_(),H=u("button"),ae=g("Create your account"),j=_(),O=u("div"),F=u("button"),$=g("I have an existing account"),se=_(),E&&E.c(),K=_(),M=u("a"),ne=g("Recover an account"),this.h()},l(U){e=d(U,"DIV",{class:!0});var W=h(e);t=d(W,"H1",{class:!0});var Ie=h(t);l=y(Ie,"Connect this device"),Ie.forEach(c),n=v(W),o=d(W,"FORM",{class:!0});var J=h(o);i=d(J,"H2",{class:!0});var Ae=h(i);w=y(Ae,"Choose a username"),Ae.forEach(c),s=v(J),p=d(J,"DIV",{class:!0});var de=h(p);b=d(de,"INPUT",{id:!0,type:!0,class:!0}),I=v(de),k&&k.l(de),de.forEach(c),L=v(J),T&&T.l(J),S=v(J),m=d(J,"DIV",{class:!0});var oe=h(m);C=d(oe,"INPUT",{type:!0,id:!0,class:!0}),V=v(oe),x=d(oe,"LABEL",{for:!0,class:!0});var Ce=h(x);A=y(Ce,"This is a public or shared computer"),Ce.forEach(c),R=v(oe),N=d(oe,"LABEL",{for:!0,class:!0});var De=h(N);P=d(De,"SPAN",{class:!0});var Ne=h(P);q=y(Ne,`In order to ensure the security of your private data, Webnative does
            not recommend creating an account from a public or shared computer.`),Ne.forEach(c),De.forEach(c),oe.forEach(c),G=v(J),D=d(J,"DIV",{class:!0});var fe=h(D);z=d(fe,"A",{class:!0,href:!0});var Te=h(z);re=y(Te,"Cancel"),Te.forEach(c),le=v(fe),H=d(fe,"BUTTON",{class:!0,type:!0});var Ue=h(H);ae=y(Ue,"Create your account"),Ue.forEach(c),fe.forEach(c),J.forEach(c),j=v(W),O=d(W,"DIV",{class:!0});var he=h(O);F=d(he,"BUTTON",{class:!0});var Le=h(F);$=y(Le,"I have an existing account"),Le.forEach(c),se=v(he),E&&E.l(he),he.forEach(c),K=v(W),M=d(W,"A",{href:!0,class:!0});var Pe=h(M);ne=y(Pe,"Recover an account"),Pe.forEach(c),W.forEach(c),this.h()},h(){a(t,"class","text-base"),a(i,"class","mb-2 text-sm font-semibold"),a(b,"id","registration"),a(b,"type","text"),a(b,"class",B="input input-bordered bg-neutral-50 !text-neutral-900 dark:border-neutral-900 rounded-lg focus:outline-none w-full px-3 block "+(f[6]?"!border-green-300":"")+" "+(f[5]?"!border-red-400":"")),Se(b,"input-error",f[0].length!==0&&!ce),a(p,"class","relative"),a(C,"type","checkbox"),a(C,"id","shared-computer"),a(C,"class","peer checkbox checkbox-primary hover:border-base-100 rounded-lg border-2 border-base-100 transition-colors duration-250 ease-in-out inline-grid align-bottom checked:bg-base-100"),a(x,"for","shared-computer"),a(x,"class","cursor-pointer ml-1 text-sm grid-inline"),a(P,"class","text-red-400 text-left"),a(N,"for","registration"),a(N,"class","label mt-4 !p-0 hidden peer-checked:block"),a(m,"class","text-left mt-4"),a(z,"class","!h-[52px] btn btn-outline !text-neutral-900 !border-neutral-900 !bg-neutral-50"),a(z,"href",Ee+"/"),a(H,"class","ml-2 !h-[52px] flex-1 btn btn-primary disabled:opacity-50 disabled:border-neutral-900 disabled:text-neutral-900"),H.disabled=X=f[0].length===0||!we||!ce||f[1],a(H,"type","submit"),a(D,"class","flex items-center mt-4"),a(o,"class","w-full p-6 rounded bg-base-content text-base-100"),a(F,"class",Y="btn btn-outline !h-[52px] w-full "+(f[4]?"!bg-base-content !text-base-100 !border-base-content":"")),a(O,"class","flex flex-col gap-5 w-full"),a(M,"href",Ee+"/recover"),a(M,"class","underline"),a(e,"class","flex flex-col items-center justify-center gap-8 min-h-[calc(100vh-128px)] md:min-h-[calc(100vh-160px)] max-w-[352px] m-auto")},m(U,W){Q(U,e,W),r(e,t),r(t,l),r(e,n),r(e,o),r(o,i),r(i,w),r(o,s),r(o,p),r(p,b),r(p,I),k&&k.m(p,null),r(o,L),T&&T.m(o,null),r(o,S),r(o,m),r(m,C),r(m,V),r(m,x),r(x,A),r(m,R),r(m,N),r(N,P),r(P,q),r(o,G),r(o,D),r(D,z),r(z,re),r(D,le),r(D,H),r(H,ae),r(e,j),r(e,O),r(O,F),r(F,$),r(O,se),E&&E.m(O,null),r(e,K),r(e,M),r(M,ne),Z||(ue=[ke(b,"input",f[7]),ke(o,"submit",f[8]),ke(F,"click",f[9])],Z=!0)},p(U,W){W&96&&B!==(B="input input-bordered bg-neutral-50 !text-neutral-900 dark:border-neutral-900 rounded-lg focus:outline-none w-full px-3 block "+(U[6]?"!border-green-300":"")+" "+(U[5]?"!border-red-400":""))&&a(b,"class",B),W&97&&Se(b,"input-error",U[0].length!==0&&!ce),U[1]?k||(k=Fe(),k.c(),k.m(p,null)):k&&(k.d(1),k=null),U[2]?T&&(T.d(1),T=null):T||(T=Re(),T.c(),T.m(o,S)),W&3&&X!==(X=U[0].length===0||!we||!ce||U[1])&&(H.disabled=X),W&16&&Y!==(Y="btn btn-outline !h-[52px] w-full "+(U[4]?"!bg-base-content !text-base-100 !border-base-content":""))&&a(F,"class",Y),U[4]?E||(E=He(),E.c(),E.m(O,null)):E&&(E.d(1),E=null)},i:ie,o:ie,d(U){U&&c(e),k&&k.d(),T&&T.d(),E&&E.d(),Z=!1,je(ue)}}}function et(f){let e,t;return e=new Qe({props:{activity:"Initializing"}}),{c(){ve(e.$$.fragment)},l(l){ge(e.$$.fragment,l)},m(l,n){ye(e,l,n),t=!0},p:ie,i(l){t||(te(e.$$.fragment,l),t=!0)},o(l){ee(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function Fe(f){let e;return{c(){e=u("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),h(e).forEach(c),this.h()},h(){a(e,"class","rounded-lg border-t-2 border-l-2 border-base-content w-4 h-4 block absolute top-4 right-4 animate-spin")},m(t,l){Q(t,e,l)},d(t){t&&c(e)}}}function Re(f){let e,t,l;return{c(){e=u("label"),t=u("span"),l=g("There was an issue registering your account. Please try again."),this.h()},l(n){e=d(n,"LABEL",{for:!0,class:!0});var o=h(e);t=d(o,"SPAN",{class:!0});var i=h(t);l=y(i,"There was an issue registering your account. Please try again."),i.forEach(c),o.forEach(c),this.h()},h(){a(t,"class","text-xxs !p-0 text-error text-left"),a(e,"for","registration"),a(e,"class","label")},m(n,o){Q(n,e,o),r(e,t),r(t,l)},d(n){n&&c(e)}}}function He(f){let e,t,l,n,o,i,w,s,p,b,B,I,L,S,m,C;return{c(){e=u("div"),t=u("h3"),l=g("Which device are you connected on?"),n=_(),o=u("p"),i=g("To connect your existing account, you'll need to:"),w=_(),s=u("ol"),p=u("li"),b=g("Find a device the account is already connected on"),B=_(),I=u("li"),L=g("Navigate to your Account Settings"),S=_(),m=u("li"),C=g('Click "Connect a new device"'),this.h()},l(V){e=d(V,"DIV",{class:!0});var x=h(e);t=d(x,"H3",{class:!0});var A=h(t);l=y(A,"Which device are you connected on?"),A.forEach(c),n=v(x),o=d(x,"P",{});var R=h(o);i=y(R,"To connect your existing account, you'll need to:"),R.forEach(c),w=v(x),s=d(x,"OL",{class:!0});var N=h(s);p=d(N,"LI",{});var P=h(p);b=y(P,"Find a device the account is already connected on"),P.forEach(c),B=v(N),I=d(N,"LI",{});var q=h(I);L=y(q,"Navigate to your Account Settings"),q.forEach(c),S=v(N),m=d(N,"LI",{});var G=h(m);C=y(G,'Click "Connect a new device"'),G.forEach(c),N.forEach(c),x.forEach(c),this.h()},h(){a(t,"class","text-sm text-center"),a(s,"class","pl-6 list-decimal"),a(e,"class","flex flex-col gap-4 p-6 rounded bg-neutral-200 text-neutral-900")},m(V,x){Q(V,e,x),r(e,t),r(t,l),r(e,n),r(e,o),r(o,i),r(e,w),r(e,s),r(s,p),r(p,b),r(s,B),r(s,I),r(I,L),r(s,S),r(s,m),r(m,C)},d(V){V&&c(e)}}}function tt(f){let e,t,l,n;const o=[et,Xe],i=[];function w(s,p){return s[3]?0:1}return e=w(f),t=i[e]=o[e](f),{c(){t.c(),l=pe()},l(s){t.l(s),l=pe()},m(s,p){i[e].m(s,p),Q(s,l,p),n=!0},p(s,[p]){let b=e;e=w(s),e===b?i[e].p(s,p):(Oe(),ee(i[b],1,1,()=>{i[b]=null}),Ye(),t=i[e],t?t.p(s,p):(t=i[e]=o[e](s),t.c()),te(t,1),t.m(l.parentNode,l))},i(s){n||(te(t),n=!0)},o(s){ee(t),n=!1},d(s){i[e].d(s),s&&c(l)}}}let we=!0,ce=!0;function rt(f,e,t){let l,n,o="",i="",w=!0,s=!1,p=!1;const b=async S=>{const{value:m}=S.target,{program:{components:{crypto:C,storage:V}}}=ze($e);t(0,o=m),t(1,s=!0);const x=await Ge(C),A=`${m}#${x}`;await V.setItem(Ke,A),i=await Ze(A),t(1,s=!1)},B=async S=>{S.preventDefault(),!s&&(t(3,p=!0),t(2,w=await Je(i)),w||t(3,p=!1))};let I=!1;const L=()=>t(4,I=!I);return f.$$.update=()=>{f.$$.dirty&3&&t(6,l=o.length>0&&!s&&we&&ce),f.$$.dirty&3&&t(5,n=o.length>0&&!s&&!ce)},[o,s,w,p,I,n,l,b,B,L]}class lt extends me{constructor(e){super(),be(this,e,rt,tt,_e,{})}}function at(f){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(l){e=We(l,"svg",{xmlns:!0,width:!0,height:!0,fill:!0});var n=h(e);t=We(n,"path",{fill:!0,"fill-rule":!0,d:!0,"clip-rule":!0}),h(t).forEach(c),n.forEach(c),this.h()},h(){a(t,"fill","currentColor"),a(t,"fill-rule","evenodd"),a(t,"d","M77.06 1.64a5.6 5.6 0 0 1 0 7.92l-44.8 44.8a5.6 5.6 0 0 1-7.92 0l-22.4-22.4a5.6 5.6 0 0 1 7.92-7.92L28.3 42.48 69.14 1.64a5.6 5.6 0 0 1 7.92 0Z"),a(t,"clip-rule","evenodd"),a(e,"xmlns","http://www.w3.org/2000/svg"),a(e,"width","79"),a(e,"height","56"),a(e,"fill","none")},m(l,n){Q(l,e,n),r(e,t)},p:ie,i:ie,o:ie,d(l){l&&c(e)}}}class st extends me{constructor(e){super(),be(this,e,null,at,_e,{})}}function nt(f){let e,t,l,n,o,i,w,s=f[0].username.trimmed+"",p,b,B,I,L,S,m,C,V,x,A,R,N,P,q,G,D,z,re,le,H,ae,X,j,O,F;return L=new st({}),{c(){e=u("input"),t=_(),l=u("div"),n=u("div"),o=u("div"),i=u("h3"),w=g("Welcome, "),p=g(s),b=g("!"),B=_(),I=u("div"),ve(L.$$.fragment),S=_(),m=u("div"),C=u("p"),V=g("Your account has been created."),x=_(),A=u("div"),R=u("input"),N=_(),P=u("label"),q=g("Waitâ€”what's my password?"),G=_(),D=u("p"),z=g("You don't need a password! "),re=u("br"),le=_(),H=g(Be),ae=g(` uses public key cryptography to authenticate you with this
            device.`),X=_(),j=u("a"),O=g("Continue"),this.h()},l($){e=d($,"INPUT",{type:!0,id:!0,class:!0}),t=v($),l=d($,"DIV",{class:!0});var Y=h(l);n=d(Y,"DIV",{class:!0});var se=h(n);o=d(se,"DIV",{});var K=h(o);i=d(K,"H3",{class:!0});var M=h(i);w=y(M,"Welcome, "),p=y(M,s),b=y(M,"!"),M.forEach(c),B=v(K),I=d(K,"DIV",{class:!0});var ne=h(I);ge(L.$$.fragment,ne),ne.forEach(c),S=v(K),m=d(K,"DIV",{});var Z=h(m);C=d(Z,"P",{class:!0});var ue=h(C);V=y(ue,"Your account has been created."),ue.forEach(c),x=v(Z),A=d(Z,"DIV",{class:!0});var k=h(A);R=d(k,"INPUT",{type:!0,id:!0,class:!0}),N=v(k),P=d(k,"LABEL",{class:!0,for:!0});var T=h(P);q=y(T,"Waitâ€”what's my password?"),T.forEach(c),G=v(k),D=d(k,"P",{class:!0});var E=h(D);z=y(E,"You don't need a password! "),re=d(E,"BR",{}),le=v(E),H=y(E,Be),ae=y(E,` uses public key cryptography to authenticate you with this
            device.`),E.forEach(c),k.forEach(c),X=v(Z),j=d(Z,"A",{class:!0,href:!0});var U=h(j);O=y(U,"Continue"),U.forEach(c),Z.forEach(c),K.forEach(c),se.forEach(c),Y.forEach(c),this.h()},h(){a(e,"type","checkbox"),a(e,"id","link-device-modal"),e.checked=!0,a(e,"class","modal-toggle"),a(i,"class","mb-14 text-base"),a(I,"class","flex justify-center mb-11 text-base-content"),a(C,"class","mb-4 text-left"),a(R,"type","checkbox"),a(R,"id","password-message"),a(R,"class","peer hidden"),a(P,"class","text-blue-500 underline mb-8 hover:cursor-pointer peer-checked:hidden"),a(P,"for","password-message"),a(D,"class","hidden peer-checked:block"),a(A,"class","mb-8 text-left"),a(j,"class","btn btn-primary"),a(j,"href",Ee+"/backup"),a(n,"class","modal-box w-narrowModal relative text-center"),a(l,"class","modal")},m($,Y){Q($,e,Y),Q($,t,Y),Q($,l,Y),r(l,n),r(n,o),r(o,i),r(i,w),r(i,p),r(i,b),r(o,B),r(o,I),ye(L,I,null),r(o,S),r(o,m),r(m,C),r(C,V),r(m,x),r(m,A),r(A,R),r(A,N),r(A,P),r(P,q),r(A,G),r(A,D),r(D,z),r(D,re),r(D,le),r(D,H),r(D,ae),r(m,X),r(m,j),r(j,O),F=!0},p($,[Y]){(!F||Y&1)&&s!==(s=$[0].username.trimmed+"")&&qe(p,s)},i($){F||(te(L.$$.fragment,$),F=!0)},o($){ee(L.$$.fragment,$),F=!1},d($){$&&c(e),$&&c(t),$&&c(l),xe(L)}}}function ot(f,e,t){let l;return Me(f,$e,n=>t(0,l=n)),[l]}class ct extends me{constructor(e){super(),be(this,e,ot,nt,_e,{})}}function it(f){let e,t;return e=new lt({}),{c(){ve(e.$$.fragment)},l(l){ge(e.$$.fragment,l)},m(l,n){ye(e,l,n),t=!0},i(l){t||(te(e.$$.fragment,l),t=!0)},o(l){ee(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function ut(f){let e,t;return e=new ct({}),{c(){ve(e.$$.fragment)},l(l){ge(e.$$.fragment,l)},m(l,n){ye(e,l,n),t=!0},i(l){t||(te(e.$$.fragment,l),t=!0)},o(l){ee(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function dt(f){let e,t,l,n;const o=[ut,it],i=[];function w(s,p){return s[0].session?0:1}return e=w(f),t=i[e]=o[e](f),{c(){t.c(),l=pe()},l(s){t.l(s),l=pe()},m(s,p){i[e].m(s,p),Q(s,l,p),n=!0},p(s,[p]){let b=e;e=w(s),e!==b&&(Oe(),ee(i[b],1,1,()=>{i[b]=null}),Ye(),t=i[e],t||(t=i[e]=o[e](s),t.c()),te(t,1),t.m(l.parentNode,l))},i(s){n||(te(t),n=!0)},o(s){ee(t),n=!1},d(s){i[e].d(s),s&&c(l)}}}function ft(f,e,t){let l;return Me(f,$e,n=>t(0,l=n)),[l]}class gt extends me{constructor(e){super(),be(this,e,ft,dt,_e,{})}}export{gt as default};
