import{S as we,i as ke,s as ye,E as ct,F as it,m as p,h as m,n as u,b as re,D as c,C as J,k as v,q as A,a as I,l as b,r as V,c as D,g as ns,t as j,d as rs,f as M,G as as,x as T,y as q,z as O,A as U,Z as os,a0 as Gt,a1 as ut,H as tt,I as cs,p as xt,v as Y,a2 as le,a3 as ne,$ as ws,u as ks,a4 as ys,o as $s,e as Zt}from"../../chunks/index-5bd3dcd0.js";import{s as is,h as Yt,f as Es,i as Cs,b as Is,j as Ds}from"../../chunks/index-29800c50.js";import{b as Dt}from"../../chunks/preload-helper-ba922b4b.js";import{a as Jt}from"../../chunks/app-info-b761063d.js";function Ss(l){let e,t;return{c(){e=ct("svg"),t=ct("path"),this.h()},l(s){e=it(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0});var n=p(e);t=it(n,"path",{fill:!0,"fill-rule":!0,d:!0,"clip-rule":!0}),p(t).forEach(m),n.forEach(m),this.h()},h(){u(t,"fill","currentColor"),u(t,"fill-rule","evenodd"),u(t,"d","M6.257 1.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.333-.213 2.98-1.742 2.98H2.42C.89 14-.073 12.353.677 11.02l5.58-9.92ZM9 10.999a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8 3a1 1 0 0 0-1 1v3a1 1 0 0 0 2 0V4a1 1 0 0 0-1-1Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"width","16"),u(e,"height","14"),u(e,"fill","none")},m(s,n){re(s,e,n),c(e,t)},p:J,i:J,o:J,d(s){s&&m(e)}}}class Hs extends we{constructor(e){super(),ke(this,e,null,Ss,ye,{})}}function Rs(l){let e,t;return{c(){e=ct("svg"),t=ct("path"),this.h()},l(s){e=it(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0});var n=p(e);t=it(n,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(t).forEach(m),n.forEach(m),this.h()},h(){u(t,"stroke","currentColor"),u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M9 13 5 9m0 0 4-4M5 9h14m-5 4v1a3 3 0 0 1-3 3H4a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3h7a3 3 0 0 1 3 3v1"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"width","20"),u(e,"height","18"),u(e,"fill","none")},m(s,n){re(s,e,n),c(e,t)},p:J,i:J,o:J,d(s){s&&m(e)}}}class As extends we{constructor(e){super(),ke(this,e,null,Rs,ye,{})}}function Vs(l){let e,t,s,n,o,r,i,a;return s=new As({}),{c(){e=v("div"),t=v("a"),T(s.$$.fragment),n=A(" Connect this device"),o=I(),r=v("a"),i=A("Recover an existing account"),this.h()},l(d){e=b(d,"DIV",{class:!0});var h=p(e);t=b(h,"A",{class:!0,href:!0});var g=p(t);q(s.$$.fragment,g),n=V(g," Connect this device"),g.forEach(m),o=D(h),r=b(h,"A",{class:!0,href:!0});var C=p(r);i=V(C,"Recover an existing account"),C.forEach(m),h.forEach(m),this.h()},h(){u(t,"class","btn btn-primary !btn-lg !h-10 gap-2"),u(t,"href",Dt+"/register"),u(r,"class","btn btn-outline"),u(r,"href",Dt+"/recover"),u(e,"class","flex flex-col items-start gap-4")},m(d,h){re(d,e,h),c(e,t),O(s,t,null),c(t,n),c(e,o),c(e,r),c(r,i),a=!0},p:J,i(d){a||(M(s.$$.fragment,d),a=!0)},o(d){j(s.$$.fragment,d),a=!1},d(d){d&&m(e),U(s)}}}function js(l){let e,t,s,n,o,r,i,a,d;return n=new Hs({}),{c(){e=v("div"),t=v("h3"),s=v("span"),T(n.$$.fragment),o=A(`
          Unsupported device`),r=I(),i=v("p"),a=A(`It appears this device isn’t supported. Webnative requires IndexedDB
          in order to function. This browser doesn’t appear to implement this
          API. Are you in a Firefox private window?`),this.h()},l(h){e=b(h,"DIV",{class:!0});var g=p(e);t=b(g,"H3",{class:!0});var C=p(t);s=b(C,"SPAN",{class:!0});var k=p(s);q(n.$$.fragment,k),k.forEach(m),o=V(C,`
          Unsupported device`),C.forEach(m),r=D(g),i=b(g,"P",{});var w=p(i);a=V(w,`It appears this device isn’t supported. Webnative requires IndexedDB
          in order to function. This browser doesn’t appear to implement this
          API. Are you in a Firefox private window?`),w.forEach(m),g.forEach(m),this.h()},h(){u(s,"class","-translate-y-[2px]"),u(t,"class","flex items-center gap-2 text-base"),u(e,"class","p-4 rounded-lg bg-base-content text-neutral-50")},m(h,g){re(h,e,g),c(e,t),c(t,s),O(n,s,null),c(t,o),c(e,r),c(e,i),c(i,a),d=!0},p:J,i(h){d||(M(n.$$.fragment,h),d=!0)},o(h){j(n.$$.fragment,h),d=!1},d(h){h&&m(e),U(n)}}}function Ms(l){let e,t,s,n,o,r,i,a,d,h,g,C;const k=[js,Vs],w=[];function R(y,S){return y[0].error==="Unsupported Browser"?0:1}return h=R(l),g=w[h]=k[h](l),{c(){e=v("div"),t=v("h1"),s=A("Welcome to the "),n=A(Jt),o=I(),r=v("div"),i=v("p"),a=A(`To be able to upload assets you need to connect this device. You will
      only be able to see assets you upload on a browser that is connected
      with the same account.`),d=I(),g.c(),this.h()},l(y){e=b(y,"DIV",{class:!0});var S=p(e);t=b(S,"H1",{class:!0});var $=p(t);s=V($,"Welcome to the "),n=V($,Jt),$.forEach(m),o=D(S),r=b(S,"DIV",{class:!0});var E=p(r);i=b(E,"P",{class:!0});var z=p(i);a=V(z,`To be able to upload assets you need to connect this device. You will
      only be able to see assets you upload on a browser that is connected
      with the same account.`),z.forEach(m),d=D(E),g.l(E),E.forEach(m),S.forEach(m),this.h()},h(){u(t,"class","text-xl"),u(i,"class","mb-5"),u(r,"class","max-w-[590px]"),u(e,"class","min-h-[calc(100vh-96px)] flex flex-col items-start justify-center max-w-[700px] m-auto gap-6 pb-5 text-sm")},m(y,S){re(y,e,S),c(e,t),c(t,s),c(t,n),c(e,o),c(e,r),c(r,i),c(i,a),c(r,d),w[h].m(r,null),C=!0},p(y,[S]){let $=h;h=R(y),h===$?w[h].p(y,S):(ns(),j(w[$],1,1,()=>{w[$]=null}),rs(),g=w[h],g?g.p(y,S):(g=w[h]=k[h](y),g.c()),M(g,1),g.m(r,null))},i(y){C||(M(g),C=!0)},o(y){j(g),C=!1},d(y){y&&m(e),w[h].d()}}}function Bs(l,e,t){let s;return as(l,is,n=>t(0,s=n)),[s]}class Fs extends we{constructor(e){super(),ke(this,e,Bs,Ms,ye,{})}}/**
 * view-draw 0.0.4
 * @license GPL-3.0
 * Copyright 2021-present Jasper Palfree
 */function Kt(l){var e=l===void 0?{}:l,t=e.autoResize,s=t===void 0?!0:t,n=e.pixelRatio,o=n===void 0?window.devicePixelRatio||1:n,r=e.width,i=r===void 0?0:r,a=e.height,d=a===void 0?0:a,h=e.aspectRatio,g=h===void 0?null:h,C=e.el,k=C===void 0?document.body:C,w=e.background,R=w===void 0?"hsl(0, 0%, 10%)":w,y=e.onResize,S=y===void 0?function(){}:y,$=k.tagName==="CANVAS"?k:document.createElement("canvas"),E=$.getContext("2d"),z={w:!i,h:!d},G={};$.style.display="flex",$.style.background=R,$.style.transform="scale("+1/o+")",$.style.transformOrigin="top left",k.tagName!=="CANVAS"&&k.appendChild($);var x=function(){var ue=$.parentNode;ue&&(z.w&&(i=ue.clientWidth),z.h&&(g?d=i/g:d=ue.clientHeight),G.width=i,G.height=d,$.style.marginBottom=(1-o)*d+"px",$.width=o*i,$.height=o*d,E.scale(o,o),S(G))};s&&window.addEventListener("resize",x),x();var N=function(){s&&window.removeEventListener("resize",x),$.parentNode&&$.parentNode.removeChild($)};return{canvas:$,ctx:E,destroy:N,dimensions:G,refresh:x}}function zs(l,e="stick-figure",t=!0){const s=document.createElement("a"),n=t?"-"+new Date().toISOString():"",o=`${e}${n}.png`;s.download=o,s.href=l.toDataURL(),s.click()}function Z(l){return l?new Promise((e,t)=>{const s=new Image;s.src=l,s.onload=()=>e(s),s.onerror=t}):null}function Qt(l,e,t,s){e&&l.drawImage(e,t,s)}function It(l){if(!l)return null;const e=l.split("/");return e[e.length-1]="mask"+e[e.length-1],e.join("/")}function Xt(l){const{width:e,height:t}=l.canvas;l.clearRect(0,0,e,t)}function et(l,e,t){const s=document.createElement("canvas");s.width=l,s.height=e;const n=s.getContext("2d",{willReadFrequently:!0});return t(n),n}function at(l,e,t){if(!e)return;const{width:s,height:n}=l.canvas,o=l.globalCompositeOperation;l.drawImage(e,0,0),l.globalCompositeOperation="source-in",l.fillStyle=t||"white",l.fillRect(0,0,s,n),l.globalCompositeOperation=o}function*Ls(l,e=0,t=0){const s=l.canvas,n=s.width,o=s.height,r=l.getImageData(e,t,s.width,s.height);for(let i=0;i<o;i++)for(let a=0;a<n;a++){let d=(i*n+a)*4;yield{x:a,y:i,pixel:r.data.subarray(d,d+4)}}}function Ns(l){let e=l.canvas.width,t=l.canvas.height,s=0,n=0;for(let o of Ls(l))o.pixel[3]>0&&(e=Math.min(o.x,e),t=Math.min(o.y,t),s=Math.max(o.x,s),n=Math.max(o.y,n));return{xmin:e,ymin:t,xmax:s,ymax:n,width:s-e,height:n-t}}function Ps(l,e=0){const t=et(l.width,l.height,o=>{o.drawImage(l,0,0)}),s=Ns(t);s.xmin-=e,s.ymin-=e,s.xmax+=e,s.ymax+=e,s.width+=2*e,s.height+=2*e;const n=t.getImageData(s.xmin,s.ymin,s.width,s.height);return t.canvas.width=s.width,t.canvas.height=s.height,t.putImageData(n,0,0),t.canvas.toDataURL()}function es(l,e,t){const s=l.slice();return s[8]=e[t].src,s[9]=e[t].value,s}function ts(l){let e,t,s,n,o,r;return{c(){e=v("div"),t=v("img"),n=I(),this.h()},l(i){e=b(i,"DIV",{class:!0});var a=p(e);t=b(a,"IMG",{src:!0,width:!0}),n=D(a),a.forEach(m),this.h()},h(){Gt(t.src,s=l[8])||u(t,"src",s),u(t,"width",l[1]),u(e,"class","carousel-item svelte-q1n2n1"),ut(e,"selected",l[0]===l[9])},m(i,a){re(i,e,a),c(e,t),c(e,n),o||(r=tt(e,"click",function(){cs(l[3](l[9]))&&l[3](l[9]).apply(this,arguments)}),o=!0)},p(i,a){l=i,a&4&&!Gt(t.src,s=l[8])&&u(t,"src",s),a&2&&u(t,"width",l[1]),a&5&&ut(e,"selected",l[0]===l[9])},d(i){i&&m(e),o=!1,r()}}}function Ts(l){let e,t=l[2],s=[];for(let n=0;n<t.length;n+=1)s[n]=ts(es(l,t,n));return{c(){e=v("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var o=p(e);for(let r=0;r<s.length;r+=1)s[r].l(o);o.forEach(m),this.h()},h(){u(e,"class","carousel selector stick-selector svelte-q1n2n1")},m(n,o){re(n,e,o);for(let r=0;r<s.length;r+=1)s[r].m(e,null)},p(n,[o]){if(o&15){t=n[2];let r;for(r=0;r<t.length;r+=1){const i=es(n,t,r);s[r]?s[r].p(i,o):(s[r]=ts(i),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},i:J,o:J,d(n){n&&m(e),os(s,n)}}}function qs(l,e,t){let{cropped:s=!1}=e,{images:n=[]}=e,{selected:o}=e,{padding:r=42}=e,{imageWidth:i=100}=e;const a=g=>()=>{o===g?t(0,o=null):t(0,o=g)};let d=[];async function h(g,C){if(!C){t(2,d=g.map(k=>({src:k,value:k})));return}t(2,d=await Promise.all(g.map(async k=>{const w=await Z(k);return{src:Ps(w,r),value:k}})))}return l.$$set=g=>{"cropped"in g&&t(4,s=g.cropped),"images"in g&&t(5,n=g.images),"selected"in g&&t(0,o=g.selected),"padding"in g&&t(6,r=g.padding),"imageWidth"in g&&t(1,i=g.imageWidth)},l.$$.update=()=>{l.$$.dirty&48&&h(n,s)},[o,i,d,a,s,n,r]}class je extends we{constructor(e){super(),ke(this,e,qs,Ts,ye,{cropped:4,images:5,selected:0,padding:6,imageWidth:1})}}function ss(l,e,t){const s=l.slice();return s[3]=e[t],s}function ls(l){let e,t,s,n,o,r;return{c(){e=v("div"),t=v("div"),s=v("div"),n=I(),this.h()},l(i){e=b(i,"DIV",{class:!0});var a=p(e);t=b(a,"DIV",{class:!0,style:!0});var d=p(t);s=b(d,"DIV",{class:!0}),p(s).forEach(m),d.forEach(m),n=D(a),a.forEach(m),this.h()},h(){u(s,"class","circle svelte-1qzawom"),u(t,"class","color svelte-1qzawom"),xt(t,"--color",l[3]),ut(t,"selected",l[0]===l[3]),u(e,"class","carousel-item")},m(i,a){re(i,e,a),c(e,t),c(t,s),c(e,n),o||(r=tt(e,"click",function(){cs(l[2](l[3]))&&l[2](l[3]).apply(this,arguments)}),o=!0)},p(i,a){l=i,a&2&&xt(t,"--color",l[3]),a&3&&ut(t,"selected",l[0]===l[3])},d(i){i&&m(e),o=!1,r()}}}function Os(l){let e,t=l[1],s=[];for(let n=0;n<t.length;n+=1)s[n]=ls(ss(l,t,n));return{c(){e=v("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var o=p(e);for(let r=0;r<s.length;r+=1)s[r].l(o);o.forEach(m),this.h()},h(){u(e,"class","selector carousel svelte-1qzawom")},m(n,o){re(n,e,o);for(let r=0;r<s.length;r+=1)s[r].m(e,null)},p(n,[o]){if(o&7){t=n[1];let r;for(r=0;r<t.length;r+=1){const i=ss(n,t,r);s[r]?s[r].p(i,o):(s[r]=ls(i),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},i:J,o:J,d(n){n&&m(e),os(s,n)}}}function Us(l,e,t){let{selected:s}=e,{colors:n=["red","green","blue"]}=e;const o=r=>()=>{s===r?t(0,s=null):t(0,s=r)};return l.$$set=r=>{"selected"in r&&t(0,s=r.selected),"colors"in r&&t(1,n=r.colors)},[s,n,o]}class ot extends we{constructor(e){super(),ke(this,e,Us,Os,ye,{selected:0,colors:1})}}const me=(l,e=1)=>Array.from({length:e},(t,s)=>{const n=(s+1).toString().padStart(2,"0");return`${l}-${n}.png`}),Ws=["red","green","blue"],Gs=["#1778BA","#333333","#726557","#7C3E99","#808080","#CB7844","#DBD1B7","#E4E4E4"],xs=["#6C402E","#895C4A","#B7775D","#D4AA78","#D4AD9F","#F0C4B8","#F5DDCE","#FFFFFF"],Zs=["#1778BA","#333333","#726557","#7C3E99","#808080","#CB7844","#DBD1B7","#E4E4E4"],Ys=Ws,_e=`${Dt}/stick-assets`,Js=me(`${_e}/Bodies/body`),Ks=me(`${_e}/Heads/head`),Qs=me(`${_e}/Heads/maskhead`),Xs=me(`${_e}/Hairs/hair`),el=me(`${_e}/Facial Hairs/facialhair`),tl=me(`${_e}/Glasses/glasses`,2),sl=me(`${_e}/Accessories/accessory`,3),ll=me(`${_e}/Hats/hat`),nl=me(`${_e}/Hats/maskhat`,3),W={bodies:Js,heads:Ks,headMasks:Qs,hairStyles:Xs,hairColors:Gs,skinColors:xs,facialHairStyles:el,facialHairColors:Zs,glasses:tl,accessories:sl,hats:ll,hatMasks:nl,hatColors:Ys};function rl(l){let e,t,s;function n(r){l[2](r)}let o={cropped:!0,images:l[1]};return l[0]!==void 0&&(o.selected=l[0]),e=new je({props:o}),Y.push(()=>le(e,"selected",n)),{c(){T(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,i){O(e,r,i),s=!0},p(r,[i]){const a={};i&2&&(a.images=r[1]),!t&&i&1&&(t=!0,a.selected=r[0],ne(()=>t=!1)),e.$set(a)},i(r){s||(M(e.$$.fragment,r),s=!0)},o(r){j(e.$$.fragment,r),s=!1},d(r){U(e,r)}}}function al(l,e,t){let{selected:s}=e;const n={public:Yt("public","gallery"),private:Yt("private","gallery")};let o=[];(async()=>{try{const a=ws(Es),d=async w=>{const R=w?n.private:n.public,y=await a.ls(R);return await Promise.all(Object.entries(y).map(async([$])=>{const E=await a.get(Cs(R,Is(`${$}`)));if(!Ds(E))return null;const z=w?E.header.content.toString():E.cid.toString(),G=new Blob([E.content]),x=URL.createObjectURL(G),N=E.header.metadata.unixMeta.ctime;return{cid:z,ctime:N,name:$,private:w,size:y[$].size,src:x}}))},h=w=>R=>(console.error(R),w),[g,C]=await Promise.all([d(!1).catch(h([])),d(!0).catch(h([]))]);let k=g.concat(C);k=k.filter(w=>!!w),k.sort((w,R)=>R.ctime-w.ctime),t(1,o=k.map(w=>w.src))}catch(a){console.error(a)}})();function i(a){s=a,t(0,s)}return l.$$set=a=>{"selected"in a&&t(0,s=a.selected)},[s,o,i]}class ol extends we{constructor(e){super(),ke(this,e,al,rl,ye,{selected:0})}}function cl(l){let e,t,s,n,o,r,i,a,d,h,g,C,k,w,R,y,S,$,E,z,G,x,N,$e,ue,K,Me,Be,ae,pe,Fe,ze,_,H,ve,P,Q,Le,Ne,X,Pe,Te,ee,qe,Oe,oe,be,Ue,We,te,Ge,xe,se,L,dt,ft,de,ht,gt,ce,He,mt,_t,ie,Ee,pt,vt,Ce,bt,Ze=St-l[10]+"",st,wt,Ie,kt,yt,fe,$t,Ye,Et,Ht;function us(f){l[17](f)}let Rt={cropped:!0,images:W.hairStyles};l[2]!==void 0&&(Rt.selected=l[2]),k=new je({props:Rt}),Y.push(()=>le(k,"selected",us));function ds(f){l[18](f)}let At={colors:W.hairColors};l[3]!==void 0&&(At.selected=l[3]),y=new ot({props:At}),Y.push(()=>le(y,"selected",ds));function fs(f){l[19](f)}let Vt={cropped:!0,images:W.hats};l[0]!==void 0&&(Vt.selected=l[0]),N=new je({props:Vt}),Y.push(()=>le(N,"selected",fs));function hs(f){l[20](f)}let jt={colors:W.hatColors};l[1]!==void 0&&(jt.selected=l[1]),K=new ot({props:jt}),Y.push(()=>le(K,"selected",hs));function gs(f){l[21](f)}let Mt={colors:W.skinColors};l[4]!==void 0&&(Mt.selected=l[4]),_=new ot({props:Mt}),Y.push(()=>le(_,"selected",gs));function ms(f){l[22](f)}let Bt={cropped:!0,images:W.facialHairStyles};l[5]!==void 0&&(Bt.selected=l[5]),X=new je({props:Bt}),Y.push(()=>le(X,"selected",ms));function _s(f){l[23](f)}let Ft={colors:W.facialHairColors};l[6]!==void 0&&(Ft.selected=l[6]),ee=new ot({props:Ft}),Y.push(()=>le(ee,"selected",_s));function ps(f){l[24](f)}let zt={cropped:!0,images:W.glasses};l[7]!==void 0&&(zt.selected=l[7]),te=new je({props:zt}),Y.push(()=>le(te,"selected",ps));function vs(f){l[25](f)}let Lt={cropped:!0,images:W.accessories};l[8]!==void 0&&(Lt.selected=l[8]),de=new je({props:Lt}),Y.push(()=>le(de,"selected",vs));function bs(f){l[28](f)}let Nt={};return l[9]!==void 0&&(Nt.selected=l[9]),fe=new ol({props:Nt}),Y.push(()=>le(fe,"selected",bs)),{c(){e=v("div"),t=v("div"),s=v("div"),n=I(),o=v("button"),r=A("Download"),i=I(),a=v("div"),d=v("div"),h=v("h3"),g=A("Hair Style"),C=I(),T(k.$$.fragment),R=I(),T(y.$$.fragment),$=I(),E=v("div"),z=v("h3"),G=A("Hat"),x=I(),T(N.$$.fragment),ue=I(),T(K.$$.fragment),Be=I(),ae=v("div"),pe=v("h3"),Fe=A("Skin Color"),ze=I(),T(_.$$.fragment),ve=I(),P=v("div"),Q=v("h3"),Le=A("Facial Hair"),Ne=I(),T(X.$$.fragment),Te=I(),T(ee.$$.fragment),Oe=I(),oe=v("div"),be=v("h3"),Ue=A("Glasses"),We=I(),T(te.$$.fragment),xe=I(),se=v("div"),L=v("h3"),dt=A("Accessory"),ft=I(),T(de.$$.fragment),gt=I(),ce=v("div"),He=v("h3"),mt=A("Custom Images"),_t=I(),ie=v("div"),Ee=v("button"),pt=A("«"),vt=I(),Ce=v("button"),bt=A("Layer "),st=A(Ze),wt=I(),Ie=v("button"),kt=A("»"),yt=I(),T(fe.$$.fragment),this.h()},l(f){e=b(f,"DIV",{class:!0});var B=p(e);t=b(B,"DIV",{class:!0});var De=p(t);s=b(De,"DIV",{class:!0});var lt=p(s);lt.forEach(m),n=D(De),o=b(De,"BUTTON",{class:!0});var Je=p(o);r=V(Je,"Download"),Je.forEach(m),De.forEach(m),i=D(B),a=b(B,"DIV",{class:!0});var F=p(a);d=b(F,"DIV",{class:!0});var he=p(d);h=b(he,"H3",{class:!0});var Ke=p(h);g=V(Ke,"Hair Style"),Ke.forEach(m),C=D(he),q(k.$$.fragment,he),R=D(he),q(y.$$.fragment,he),he.forEach(m),$=D(F),E=b(F,"DIV",{class:!0});var ge=p(E);z=b(ge,"H3",{class:!0});var Qe=p(z);G=V(Qe,"Hat"),Qe.forEach(m),x=D(ge),q(N.$$.fragment,ge),ue=D(ge),q(K.$$.fragment,ge),ge.forEach(m),Be=D(F),ae=b(F,"DIV",{class:!0});var Se=p(ae);pe=b(Se,"H3",{class:!0});var Xe=p(pe);Fe=V(Xe,"Skin Color"),Xe.forEach(m),ze=D(Se),q(_.$$.fragment,Se),Se.forEach(m),ve=D(F),P=b(F,"DIV",{class:!0});var Re=p(P);Q=b(Re,"H3",{class:!0});var Pt=p(Q);Le=V(Pt,"Facial Hair"),Pt.forEach(m),Ne=D(Re),q(X.$$.fragment,Re),Te=D(Re),q(ee.$$.fragment,Re),Re.forEach(m),Oe=D(F),oe=b(F,"DIV",{class:!0});var nt=p(oe);be=b(nt,"H3",{class:!0});var Tt=p(be);Ue=V(Tt,"Glasses"),Tt.forEach(m),We=D(nt),q(te.$$.fragment,nt),nt.forEach(m),xe=D(F),se=b(F,"DIV",{class:!0});var rt=p(se);L=b(rt,"H3",{class:!0});var qt=p(L);dt=V(qt,"Accessory"),qt.forEach(m),ft=D(rt),q(de.$$.fragment,rt),rt.forEach(m),gt=D(F),ce=b(F,"DIV",{class:!0});var Ae=p(ce);He=b(Ae,"H3",{class:!0});var Ot=p(He);mt=V(Ot,"Custom Images"),Ot.forEach(m),_t=D(Ae),ie=b(Ae,"DIV",{class:!0});var Ve=p(ie);Ee=b(Ve,"BUTTON",{class:!0});var Ut=p(Ee);pt=V(Ut,"«"),Ut.forEach(m),vt=D(Ve),Ce=b(Ve,"BUTTON",{class:!0});var Ct=p(Ce);bt=V(Ct,"Layer "),st=V(Ct,Ze),Ct.forEach(m),wt=D(Ve),Ie=b(Ve,"BUTTON",{class:!0});var Wt=p(Ie);kt=V(Wt,"»"),Wt.forEach(m),Ve.forEach(m),yt=D(Ae),q(fe.$$.fragment,Ae),Ae.forEach(m),F.forEach(m),B.forEach(m),this.h()},h(){u(s,"class","flex-none canvas-wrap svelte-oekj46"),u(o,"class","btn btn-wide"),u(t,"class","display"),u(h,"class","svelte-oekj46"),u(d,"class","stick-option svelte-oekj46"),u(z,"class","svelte-oekj46"),u(E,"class","stick-option svelte-oekj46"),u(pe,"class","svelte-oekj46"),u(ae,"class","stick-option svelte-oekj46"),u(Q,"class","svelte-oekj46"),u(P,"class","stick-option svelte-oekj46"),u(be,"class","svelte-oekj46"),u(oe,"class","stick-option svelte-oekj46"),u(L,"class","svelte-oekj46"),u(se,"class","stick-option svelte-oekj46"),u(He,"class","svelte-oekj46"),u(Ee,"class","btn"),u(Ce,"class","btn"),u(Ie,"class","btn"),u(ie,"class","btn-group"),u(ce,"class","stick-option svelte-oekj46"),u(a,"class","controls flex-none svelte-oekj46"),u(e,"class","grid grid-rows-1 grid-flow-col gap-4")},m(f,B){re(f,e,B),c(e,t),c(t,s),l[16](s),c(t,n),c(t,o),c(o,r),c(e,i),c(e,a),c(a,d),c(d,h),c(h,g),c(d,C),O(k,d,null),c(d,R),O(y,d,null),c(a,$),c(a,E),c(E,z),c(z,G),c(E,x),O(N,E,null),c(E,ue),O(K,E,null),c(a,Be),c(a,ae),c(ae,pe),c(pe,Fe),c(ae,ze),O(_,ae,null),c(a,ve),c(a,P),c(P,Q),c(Q,Le),c(P,Ne),O(X,P,null),c(P,Te),O(ee,P,null),c(a,Oe),c(a,oe),c(oe,be),c(be,Ue),c(oe,We),O(te,oe,null),c(a,xe),c(a,se),c(se,L),c(L,dt),c(se,ft),O(de,se,null),c(a,gt),c(a,ce),c(ce,He),c(He,mt),c(ce,_t),c(ce,ie),c(ie,Ee),c(Ee,pt),c(ie,vt),c(ie,Ce),c(Ce,bt),c(Ce,st),c(ie,wt),c(ie,Ie),c(Ie,kt),c(ce,yt),O(fe,ce,null),Ye=!0,Et||(Ht=[tt(o,"click",l[12]),tt(Ee,"click",l[26]),tt(Ie,"click",l[27])],Et=!0)},p(f,[B]){const De={};!w&&B&4&&(w=!0,De.selected=f[2],ne(()=>w=!1)),k.$set(De);const lt={};!S&&B&8&&(S=!0,lt.selected=f[3],ne(()=>S=!1)),y.$set(lt);const Je={};!$e&&B&1&&($e=!0,Je.selected=f[0],ne(()=>$e=!1)),N.$set(Je);const F={};!Me&&B&2&&(Me=!0,F.selected=f[1],ne(()=>Me=!1)),K.$set(F);const he={};!H&&B&16&&(H=!0,he.selected=f[4],ne(()=>H=!1)),_.$set(he);const Ke={};!Pe&&B&32&&(Pe=!0,Ke.selected=f[5],ne(()=>Pe=!1)),X.$set(Ke);const ge={};!qe&&B&64&&(qe=!0,ge.selected=f[6],ne(()=>qe=!1)),ee.$set(ge);const Qe={};!Ge&&B&128&&(Ge=!0,Qe.selected=f[7],ne(()=>Ge=!1)),te.$set(Qe);const Se={};!ht&&B&256&&(ht=!0,Se.selected=f[8],ne(()=>ht=!1)),de.$set(Se),(!Ye||B&1024)&&Ze!==(Ze=St-f[10]+"")&&ks(st,Ze);const Xe={};!$t&&B&512&&($t=!0,Xe.selected=f[9],ne(()=>$t=!1)),fe.$set(Xe)},i(f){Ye||(M(k.$$.fragment,f),M(y.$$.fragment,f),M(N.$$.fragment,f),M(K.$$.fragment,f),M(_.$$.fragment,f),M(X.$$.fragment,f),M(ee.$$.fragment,f),M(te.$$.fragment,f),M(de.$$.fragment,f),M(fe.$$.fragment,f),Ye=!0)},o(f){j(k.$$.fragment,f),j(y.$$.fragment,f),j(N.$$.fragment,f),j(K.$$.fragment,f),j(_.$$.fragment,f),j(X.$$.fragment,f),j(ee.$$.fragment,f),j(te.$$.fragment,f),j(de.$$.fragment,f),j(fe.$$.fragment,f),Ye=!1},d(f){f&&m(e),l[16](null),U(k),U(y),U(N),U(K),U(_),U(X),U(ee),U(te),U(de),U(fe),Et=!1,ys(Ht)}}}const St=12;function il(l,e,t){let s,n,o;async function r(_,H){if(!_)return;const{ctx:ve}=_.offcanvas,{width:P,height:Q}=ve.canvas,[Le,Ne,X,Pe,Te,ee,qe,Oe]=await Promise.all([Z(W.bodies[0]),Z(W.heads[0]),Z(H.hairStyle),Z(H.facialHairStyle),Z(H.glasses),Z(H.accessory),Z(H.hat),Z(H.customImage)]),[oe,be,Ue]=await Promise.all([Z(It(W.heads[0])),Z(It(H.hairStyle)),Z(It(H.hat))]),{canvas:We}=et(P,Q,L=>{at(L,oe,H.skinColor)}),{canvas:te}=et(P,Q,L=>{at(L,be,H.hairColor)}),{canvas:Ge}=et(P,Q,L=>{at(L,Pe,H.facialHairColor)}),{canvas:xe}=et(P,Q,L=>{at(L,Ue,H.hatColor)});Xt(ve);let se=[Le,We,Ge,Ne,te,X,Te,ee,xe,qe];se.splice(-H.customImageLayerIndex-1,0,Oe),se.forEach(L=>Qt(ve,L,0,0)),Xt(_.ctx),Qt(_.ctx,ve.canvas,0,0)}function i(){zs(o.canvas,"stick-figure",!0)}let a=null,d=null,h=null,g=null,C=null,k=null,w=null,R=null,y=null,S=null,$=0;function E(_){t(10,$=Math.min(St,Math.max(0,_+$)))}$s(()=>{const _={el:n,width:710,height:943,autoResize:!1,background:"transparent"};t(14,o=Kt(_));const H=Kt({..._,el:document.createElement("canvas")});H.canvas.width=_.width,H.canvas.height=_.height,t(14,o.offcanvas=H,o),r(o,s)});function z(_){Y[_?"unshift":"push"](()=>{n=_,t(11,n)})}function G(_){h=_,t(2,h)}function x(_){g=_,t(3,g),t(2,h)}function N(_){a=_,t(0,a)}function $e(_){d=_,t(1,d),t(0,a)}function ue(_){C=_,t(4,C)}function K(_){k=_,t(5,k)}function Me(_){w=_,t(6,w),t(5,k)}function Be(_){R=_,t(7,R)}function ae(_){y=_,t(8,y)}const pe=()=>E(1),Fe=()=>E(-1);function ze(_){S=_,t(9,S)}return l.$$.update=()=>{l.$$.dirty&3&&a&&!d&&t(1,d=W.hatColors[0]),l.$$.dirty&12&&h&&!g&&t(3,g=W.hairColors[0]),l.$$.dirty&96&&k&&!w&&t(6,w=W.facialHairColors[0]),l.$$.dirty&2047&&t(15,s={hat:a,hatColor:d,hairStyle:h,hairColor:g,skinColor:C,facialHairStyle:k,facialHairColor:w,glasses:R,accessory:y,customImage:S,customImageLayerIndex:$}),l.$$.dirty&49152&&r(o,s)},[a,d,h,g,C,k,w,R,y,S,$,n,i,E,o,s,z,G,x,N,$e,ue,K,Me,Be,ae,pe,Fe,ze]}class ul extends we{constructor(e){super(),ke(this,e,il,cl,ye,{})}}function dl(l){let e,t;return e=new Fs({}),{c(){T(e.$$.fragment)},l(s){q(e.$$.fragment,s)},m(s,n){O(e,s,n),t=!0},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function fl(l){let e,t;return e=new ul({}),{c(){T(e.$$.fragment)},l(s){q(e.$$.fragment,s)},m(s,n){O(e,s,n),t=!0},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function hl(l){let e,t,s,n;const o=[fl,dl],r=[];function i(a,d){var h;return(h=a[0])!=null&&h.session?0:1}return e=i(l),t=r[e]=o[e](l),{c(){t.c(),s=Zt()},l(a){t.l(a),s=Zt()},m(a,d){r[e].m(a,d),re(a,s,d),n=!0},p(a,[d]){let h=e;e=i(a),e!==h&&(ns(),j(r[h],1,1,()=>{r[h]=null}),rs(),t=r[e],t||(t=r[e]=o[e](a),t.c()),M(t,1),t.m(s.parentNode,s))},i(a){n||(M(t),n=!0)},o(a){j(t),n=!1},d(a){r[e].d(a),a&&m(s)}}}function gl(l,e,t){let s;return as(l,is,n=>t(0,s=n)),[s]}class bl extends we{constructor(e){super(),ke(this,e,gl,hl,ye,{})}}export{bl as default};
